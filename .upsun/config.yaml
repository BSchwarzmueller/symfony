# Upsun configuration, generated using AI at: 2025-09-27T14:41:48+02:00
# AI can make mistakes. Please modify this file to suit your needs.
applications:
  app:
    type: php:8.3

    build:
      flavor: none

    hooks:
      build: |
        set -ex
        curl -sfS https://get.symfony.com/cloud/configurator | bash
        symfony-build

      deploy: |
        set -ex
        symfony-deploy

    web:
      locations:
        /:
          root: public
          passthru: /index.php
          expires: 5m

    runtime:
      extensions:
        - pdo_mysql
        - apcu
        - mbstring
        - sodium

    relationships:
      database: {}

    mounts:
      var/cache:
        source: tmp
      var/log:
        source: storage

    variables:
      env:
        APP_ENV: prod
        APP_DEBUG: '0'

services:
  database:
    type: mariadb:11.8

routes:
  https://{default}/:
    type: upstream
    upstream: app:http